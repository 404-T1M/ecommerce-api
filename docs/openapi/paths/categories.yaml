adminCreateCategory:
  post:
    summary: Create category
    description: Creates a new category with an icon image.
    tags:
      - Categories
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        multipart/form-data:
          schema:
            $ref: "../schemas/index.yaml#/CreateCategoryRequest"
          examples:
            sample:
              value:
                nameEn: Electronics
                nameAr: إلكترونيات
                descriptionEn: Electronics and devices
                descriptionAr: الإلكترونيات والأجهزة
                order: 1
                published: true
                isFeatured: false
                parent: 65b1f0a2f7a1c2d3e4f5a111
    responses:
      "201":
        description: Created
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/CreateCategoryResponse"
            examples:
              sample:
                value:
                  message: Category Created Successfully
                  category:
                    id: 65b1f0a2f7a1c2d3e4f5a222
                    name:
                      en: Electronics
                      ar: إلكترونيات
                    slug: electronics
                    description:
                      en: Electronics and devices
                      ar: الإلكترونيات والأجهزة
                    parent: null
                    order: 1
                    published: true
                    image:
                      fileName: categories/abc123
                      imageSize: 24567
                      imageUrl: https://res.cloudinary.com/xxx/image/upload/...
                    isFeatured: false
                    createdBy: 65b1f0a2f7a1c2d3e4f5a333
                    createdAt: "2026-02-04T12:00:00.000Z"
      "400":
        description: Bad Request
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
            examples:
              required_fields:
                value:
                  status: fail
                  message: Category name (en, ar) and order are required
              image_required:
                value:
                  status: fail
                  message: Category Icon is Required
              parent_not_found:
                value:
                  status: fail
                  message: Parent category not found
      "401":
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
      "403":
        description: Forbidden
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
      "409":
        description: Conflict
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
            examples:
              slug_exists:
                value:
                  status: fail
                  message: slug already exists
      "500":
        description: Internal Server Error
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"

adminListCategories:
  get:
    summary: List categories (admin)
    description: Returns a paginated list of categories (admin view).
    tags:
      - Categories
    security:
      - bearerAuth: []
    parameters:
      - name: name
        in: query
        schema:
          type: string
        description: Filter by name (en/ar, partial match).
      - name: published
        in: query
        schema:
          type: boolean
        description: Filter by published status.
      - name: parent
        in: query
        schema:
          type: string
        description: Filter by parent category ID.
      - name: fromDate
        in: query
        schema:
          type: string
          format: date-time
        description: Filter by createdAt >= fromDate.
      - name: toDate
        in: query
        schema:
          type: string
          format: date-time
        description: Filter by createdAt <= toDate.
      - name: page
        in: query
        schema:
          type: integer
          example: 1
        description: Page number.
      - name: limit
        in: query
        schema:
          type: integer
          example: 10
        description: Page size.
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/AdminCategoriesListResponse"
      "401":
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
      "403":
        description: Forbidden
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
      "500":
        description: Internal Server Error
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"

publicListCategories:
  get:
    summary: List categories (public)
    description: Returns a paginated list of published categories.
    tags:
      - Categories
    parameters:
      - name: name
        in: query
        schema:
          type: string
        description: Filter by name (en/ar, partial match).
      - name: page
        in: query
        schema:
          type: integer
          example: 1
        description: Page number.
      - name: limit
        in: query
        schema:
          type: integer
          example: 10
        description: Page size.
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/CategoriesListResponse"
      "500":
        description: Internal Server Error
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
adminDeleteCategory:
  delete:
    summary: Delete category
    description: Deletes a category if it has no subcategories.
    tags:
      - Categories
    security:
      - bearerAuth: []
    parameters:
      - name: categoryId
        in: path
        required: true
        schema:
          type: string
    responses:
      "203":
        description: Non-Authoritative Information
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/MessageResponse"
            examples:
              sample:
                value:
                  message: Category Deleted Successfully
      "400":
        description: Bad Request
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
            examples:
              bad_request:
                value:
                  status: fail
                  message: Category not found
      "401":
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
      "403":
        description: Forbidden
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
      "404":
        description: Not Found
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
            examples:
              not_found:
                value:
                  status: fail
                  message: Category not found
      "409":
        description: Conflict
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
            examples:
              has_children:
                value:
                  status: fail
                  message: Cannot delete category with subcategories
      "500":
        description: Internal Server Error
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
adminUpdateCategory:
  patch:
    summary: Update category
    description: Updates category fields and optionally replaces the icon image.
    tags:
      - Categories
    security:
      - bearerAuth: []
    parameters:
      - name: categoryId
        in: path
        required: true
        schema:
          type: string
    requestBody:
      required: true
      content:
        multipart/form-data:
          schema:
            $ref: "../schemas/index.yaml#/UpdateCategoryRequest"
          examples:
            sample:
              value:
                nameEn: Electronics
                nameAr: إلكترونيات
                descriptionEn: Updated description
                descriptionAr: وصف محدث
                parent: 65b1f0a2f7a1c2d3e4f5a111
                isFeatured: true
    responses:
      "201":
        description: Created
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/UpdateCategoryResponse"
            examples:
              sample:
                value:
                  message: Category Updated Successfully
                  category:
                    id: 65b1f0a2f7a1c2d3e4f5a222
                    name:
                      en: Electronics
                      ar: إلكترونيات
                    slug: electronics
                    description:
                      en: Updated description
                      ar: وصف محدث
                    parent: null
                    order: 1
                    published: true
                    image:
                      fileName: categories/abc123
                      imageSize: 24567
                      imageUrl: https://res.cloudinary.com/xxx/image/upload/...
                    isFeatured: true
                    createdBy: 65b1f0a2f7a1c2d3e4f5a333
                    createdAt: "2026-02-04T12:00:00.000Z"
      "400":
        description: Bad Request
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
            examples:
              invalid_parent:
                value:
                  status: fail
                  message: Invalid parent category
      "401":
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
      "403":
        description: Forbidden
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
      "404":
        description: Not Found
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
            examples:
              not_found:
                value:
                  status: fail
                  message: Category not found
      "409":
        description: Conflict
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
            examples:
              slug_exists:
                value:
                  status: fail
                  message: slug already exists
      "500":
        description: Internal Server Error
        content:
          application/json:
            schema:
              $ref: "../schemas/index.yaml#/ErrorResponse"
